<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.14e2c4e8486d138e44b2.css">@import url(https://rsms.me/inter/inter.css);code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre>code[class*=language-]{font-size:1em}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#c1def1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #ddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #ddd}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:green;font-style:italic}.token.namespace{opacity:.7}.token.string{color:#a31515}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.inserted,.token.number,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.language-json .token.boolean,.language-json .token.number,.token.atrule,.token.attr-value,.token.keyword,code[class*=language-css]{color:#00f}.token.function{color:#393a34}.language-autohotkey .token.tag,.token.deleted{color:#9a050f}.language-autohotkey .token.keyword,.token.selector{color:#00009f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.language-json .token.property,.token.class-name{color:#2b91af}.token.selector,.token.tag{color:maroon}.token.attr-name,.token.entity,.token.property,.token.regex{color:red}.token.directive.tag .tag{background:#ff0;color:#393a34}.line-numbers .line-numbers-rows{border-right-color:#a5a5a5}.line-numbers-rows>span:before{color:#2b91af}.line-highlight{background:rgba(193,222,241,.2);background:-webkit-gradient(linear,left top,right top,color-stop(70%,rgba(193,222,241,.2)),to(rgba(221,222,241,0)));background:linear-gradient(90deg,rgba(193,222,241,.2) 70%,rgba(221,222,241,0))}.navbar{position:-webkit-sticky;position:sticky;top:0;background:#fff;z-index:100;padding:.5rem 1rem;box-shadow:0 8px 6px -7px #999}.navbar .navbar-nav{display:flex;margin:0;padding:0;list-style:none}.navbar .nav-item{display:block;padding:.5rem .8rem}.navbar .nav-link{text-decoration:none;text-transform:uppercase;font-weight:600;color:#000;-webkit-transition:all .15s ease-in;transition:all .15s ease-in;position:relative}.navbar .nav-link:hover{color:#2f8f3c}.navbar .nav-link-active:after{content:"";position:absolute;bottom:-16px;height:8px;width:140%;background:#2f8f3c;z-index:101;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.flex-row{flex-direction:row}.link{display:inline-block;margin-right:30px;max-width:330px;background:#fff;box-sizing:border-box;border:1px solid #bbb;box-shadow:0 2px 4px rgba(0,0,0,.07);border-radius:3px}.image-pane{height:150px;overflow:hidden;margin-left:1em;margin-right:1em}.title-pane{border-top:2px solid #bbb;padding:1em}.image-bg{width:100%;border-top-left-radius:3px;border-top-right-radius:3px;border-below:1px solid rgba(0,0,0,.07)}.index{color:#888;margin-right:.5rem}.title{margin-top:.5em}a{text-decoration:none;color:#000}html{font-family:Inter,sans-serif}@supports (font-variation-settings:normal){html{font-family:Inter var,sans-serif}}html{width:100%;overflow-x:hidden}body,html{padding:0;margin:0}body{font-family:Inter,sans-serif;font-weight:400;font-size:16px;color:#111;height:100%}a{color:#428bca}a,code{font-weight:600}code{font-family:Source Code Pro,monospace!important;color:#15401b}.content{line-height:1.5}img{margin-top:2.5em;margin-bottom:2.5em;margin-left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.heading-wrapper{padding-top:1em;text-align:center}.title-large{text-align:center;font-size:4em;margin-bottom:0;line-height:.9;text-transform:uppercase;color:#2f8f3c}.subtitle{font-size:1.2em;color:#333;margin-bottom:50px;font-weight:400;text-align:center;font-style:italic}.wrapper{max-width:800px;margin:0 auto}.footer,.wrapper{padding-left:2em;padding-right:2em}.footer{font-size:95%;margin-bottom:50px;color:#333}.copyright-div{width:80%;margin:2rem auto;color:#ddd}</style><meta name="generator" content="Gatsby 2.17.13"/><title data-react-helmet="true"></title><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-9ed5a3188444eb9ed63a.js"/><link as="script" rel="preload" href="/app-548a050960bc5dbbb9a0.js"/><link as="script" rel="preload" href="/styles-a76dd3fff079e0a4c8a9.js"/><link as="script" rel="preload" href="/commons-7e2641da1600b03f9e76.js"/><link as="script" rel="preload" href="/component---src-pages-index-js-acc23a508032b81169a3.js"/><link as="fetch" rel="preload" href="/page-data/index/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><header class="navbar"><div class="wrapper"><ul class="navbar-nav flex-row"><li class="nav-item"><a aria-current="page" class="nav-link nav-link-active" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/examples">Examples</a></li></ul></div></header><div class="wrapper"><div class="heading-wrapper"><h1 class="title-large">OCurrent</h1><h2 class="subtitle">a workflow specification language written in OCaml</h2></div><div class="content"><p>OCurrent allows you to specify a workflow / pipeline for keeping things
up-to-date.</p>
<p><img src="/pipeline.svg" alt="Example OCurrent pipeline"></p>
<p>For example, the pipeline shown about fetches the head of a GitHub repository's
<code>master</code> branch, builds it, runs the tests, and deploys the binary if the tests
pass. When a new commit is pushed, it runs the pipeline again.</p>
<pre><code class="language-ocaml">let pipeline ~repo () =
  let src = Git.Local.head_commit repo in
  let base = Docker.pull ~schedule:weekly "ocaml/opam2" in
  let build ocaml_version =
    let dockerfile =
      let+ base = base in
      dockerfile ~base ~ocaml_version
    in
    Docker.build ~label:ocaml_version ~pull:false ~dockerfile (`Git src) |>
    Docker.tag ~tag:(Fmt.strf "example-%s" ocaml_version)
  in
  Current.all [
    build "4.07";
    build "4.08"
  ]
</code></pre>
<p>Another use might be to keep the GitHub build status of each PR in your Git
repository showing the result of fetching, building and testing the PR's head
commit. If the head commit changes, the result must be recalculated.</p>
<p>An OCurrent pipeline is written using an OCaml eDSL. When OCurrent evaluates it,
it records the inputs used (e.g. the current set of open PRs and the head of
each one), monitors them, and automatically recalculates when an input changes.</p>
<p>The <a href="https://github.com/ocurrent/ocurrent/wiki">OCurrent wiki</a> contains documentation and examples. In particular,
you might like to start by reading about the <a href="./examples">example pipelines</a> or
how to <a href="https://github.com/ocurrent/ocurrent/wiki/Writing-plugins">write your own plugins</a>.</p>
<p>Larger uses of OCurrent include the <a href="https://github.com/ocurrent/docker-base-images">OCaml Docker base image
builder</a> and the <a href="https://github.com/ocurrent/ocaml-ci">CI pipeline</a> for OCaml platform projects.</p>
<hr class="copyright-div">
<div class="footer">
OCurrent is developed and maintained by OCaml Labs Consultancy and Tarides for
use in the OCaml open-source community.
<p>Â© 2019, the OCurrent authors. Distributed under the <a href="https://github.com/ocurrent/ocurrent/blob/master/LICENSE">Apache-2.0
license</a>.</p>
</div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-548a050960bc5dbbb9a0.js"],"component---src-templates-example-js":["/component---src-templates-example-js-f9165419950e52c67e07.js"],"component---src-pages-examples-js":["/component---src-pages-examples-js-1bd3bd453f715b367ca4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-acc23a508032b81169a3.js"]};/*]]>*/</script><script src="/component---src-pages-index-js-acc23a508032b81169a3.js" async=""></script><script src="/commons-7e2641da1600b03f9e76.js" async=""></script><script src="/styles-a76dd3fff079e0a4c8a9.js" async=""></script><script src="/app-548a050960bc5dbbb9a0.js" async=""></script><script src="/webpack-runtime-9ed5a3188444eb9ed63a.js" async=""></script></body></html>